# í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©ì Domain Input ë¶„ì„

## ğŸ“… ì‘ì„±ì¼
2025-10-16

## ğŸ¯ ëª©ì 
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©ìê°€ ì…ë ¥í•˜ëŠ” domain inputì´ ë¬´ì—‡ì¸ì§€ íŒŒì•…í•˜ì—¬,
ë°±ì—”ë“œ E2E í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©ëœ inputê³¼ ë¹„êµ ë¶„ì„

---

## ğŸ–¥ï¸ í”„ë¡ íŠ¸ì—”ë“œ: ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥í•˜ëŠ” Domain Input

### âœ… **1ë‹¨ê³„: ì„ ìˆ˜ í‰ê°€ (Player Rating)**

**ì»´í¬ë„ŒíŠ¸**: `PlayerRatingManager.js` â†’ `RatingEditor.js`

**ì‚¬ìš©ì ì…ë ¥**:
```javascript
// ê° ì„ ìˆ˜ë§ˆë‹¤ 18ê°œ ì†ì„±ì„ 1.0 ~ 5.0 ì ìˆ˜ë¡œ í‰ê°€
const playerRatings = {
  [playerId]: {
    // ê³µê²© ì†ì„± (6ê°œ)
    finishing: 4.5,        // ë§ˆë¬´ë¦¬
    shotPower: 4.0,        // ìŠ› íŒŒì›Œ
    longShots: 3.5,        // ì¤‘ê±°ë¦¬ ìŠ›
    heading: 3.0,          // í—¤ë”©
    volleys: 3.5,          // ë°œë¦¬ìŠ›
    penalties: 4.0,        // í˜ë„í‹°í‚¥

    // ê¸°ìˆ  ì†ì„± (6ê°œ)
    dribbling: 4.5,        // ë“œë¦¬ë¸”
    ballControl: 4.5,      // ë³¼ ì»¨íŠ¸ë¡¤
    crossing: 3.5,         // í¬ë¡œìŠ¤
    shortPassing: 4.0,     // ì§§ì€ íŒ¨ìŠ¤
    longPassing: 3.5,      // ê¸´ íŒ¨ìŠ¤
    curve: 3.5,            // ì»¤ë¸Œ

    // ìˆ˜ë¹„ ì†ì„± (3ê°œ)
    marking: 3.0,          // ë§ˆí‚¹
    standingTackle: 3.0,   // ìŠ¤íƒ ë”© íƒœí´
    slidingTackle: 2.5,    // ìŠ¬ë¼ì´ë”© íƒœí´

    // ì‹ ì²´ ì†ì„± (3ê°œ)
    acceleration: 4.5,     // ê°€ì†ë ¥
    sprintSpeed: 4.5,      // ì§ˆì£¼ ì†ë„
    stamina: 4.0,          // ìŠ¤íƒœë¯¸ë‚˜

    // ì¶”ê°€ ì •ë³´
    _subPosition: 'RW',    // ì„¸ë¶€ í¬ì§€ì…˜
    _comment: 'ì˜¤ë¥¸ìª½ ìœ™ì–´ë¡œ í™œìš© ê°€ëŠ¥' // ì½”ë©˜íŠ¸
  }
}
```

**ì €ì¥ ê²½ë¡œ**: `backend/data/player_ratings/{team_name}/{player_id}.json`

**íŠ¹ì§•**:
- âœ… **18ê°œ ì†ì„± ì§ì ‘ í‰ê°€** (ê³µê²© 6ê°œ, ê¸°ìˆ  6ê°œ, ìˆ˜ë¹„ 3ê°œ, ì‹ ì²´ 3ê°œ)
- âœ… **1.0 ~ 5.0 ë²”ìœ„** (0.1 ë‹¨ìœ„ ì¡°ì • ê°€ëŠ¥)
- âœ… **ì„¸ë¶€ í¬ì§€ì…˜ ì§€ì •** (ì˜ˆ: RW, LW, ST, CM ë“±)
- âœ… **ì½”ë©˜íŠ¸ ì¶”ê°€** (ììœ  í…ìŠ¤íŠ¸)
- âš ï¸ **ëª¨ë“  ì„ ìˆ˜ë¥¼ í‰ê°€í•´ì•¼ í•¨** (ìµœì†Œ 11ëª… ì´ìƒ)

---

### âœ… **2ë‹¨ê³„: í¬ë©”ì´ì…˜ ì„ íƒ (Formation)**

**ì»´í¬ë„ŒíŠ¸**: `SquadBuilder.js` (í¬ë©”ì´ì…˜ ë“œë¡­ë‹¤ìš´)

**ì‚¬ìš©ì ì…ë ¥**:
```javascript
const formation = '4-3-3'; // 6ê°€ì§€ í¬ë©”ì´ì…˜ ì¤‘ ì„ íƒ

// ê°€ëŠ¥í•œ í¬ë©”ì´ì…˜:
// - '4-3-3': ì „í†µì ì¸ ê³µê²©í˜• í¬ë©”ì´ì…˜
// - '4-4-2': ê· í˜•ì¡íŒ í¬ë©”ì´ì…˜
// - '4-2-3-1': í˜„ëŒ€ì ì¸ ì¤‘ì› ë°€ì§‘
// - '3-5-2': ì¸¡ë©´ ê³µê²© ì¤‘ì‹œ
// - '3-4-3': ê³µê²©ì  ë³€í˜•
// - '5-3-2': ìˆ˜ë¹„ì  ë³€í˜•
```

**ì €ì¥ ê²½ë¡œ**: `backend/data/formations/{team_name}.json`

**í˜•ì‹**:
```json
{
  "team": "Arsenal",
  "formation": "4-3-3",
  "saved_at": "2025-10-16T12:00:00Z"
}
```

**íŠ¹ì§•**:
- âœ… **6ê°€ì§€ í¬ë©”ì´ì…˜ ì¤‘ ì„ íƒ**
- âœ… **ê° í¬ë©”ì´ì…˜ë§ˆë‹¤ í¬ì§€ì…˜ ì¢Œí‘œ ì‚¬ì „ ì •ì˜ë¨**
- âœ… **ë“œë¡­ë‹¤ìš´ì—ì„œ í•œ ë²ˆ í´ë¦­ìœ¼ë¡œ ì„ íƒ**

---

### âœ… **3ë‹¨ê³„: ë¼ì¸ì—… êµ¬ì„± (Lineup)**

**ì»´í¬ë„ŒíŠ¸**: `SquadBuilder.js` (ë“œë˜ê·¸ ì•¤ ë“œë¡­)

**ì‚¬ìš©ì ì…ë ¥**:
```javascript
const lineup = {
  starters: {
    // í¬ì§€ì…˜ë³„ë¡œ ì„ ìˆ˜ ë°°ì¹˜ (11ëª…)
    'GK': playerId,
    'LB': playerId,
    'CB-L': playerId,
    'CB-R': playerId,
    'RB': playerId,
    'CM-L': playerId,
    'CDM': playerId,
    'CM-R': playerId,
    'LW': playerId,
    'ST': playerId,
    'RW': playerId
  },
  substitutes: [playerId1, playerId2, playerId3, ...] // í›„ë³´ ì„ ìˆ˜
}
```

**ì €ì¥ ê²½ë¡œ**: `backend/data/lineups/{team_name}.json`

**í˜•ì‹**:
```json
{
  "team": "Arsenal",
  "formation": "4-3-3",
  "starters": {
    "GK": 123,
    "LB": 456,
    "CB-L": 789,
    ...
  },
  "substitutes": [999, 888, 777],
  "saved_at": "2025-10-16T12:00:00Z"
}
```

**íŠ¹ì§•**:
- âœ… **ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ 11ëª… ë°°ì¹˜**
- âœ… **í¬ë©”ì´ì…˜ì— ë”°ë¼ í¬ì§€ì…˜ ìë™ ìƒì„±**
- âœ… **ë¶€ìƒìëŠ” ë°°ì¹˜ ë¶ˆê°€** (ë¹¨ê°„ìƒ‰ í‘œì‹œ)
- âœ… **í›„ë³´ ì„ ìˆ˜ë„ ë“±ë¡ ê°€ëŠ¥**
- âš ï¸ **ì •í™•íˆ 11ëª…ì„ ë°°ì¹˜í•´ì•¼ í•¨**

---

### âœ… **4ë‹¨ê³„: ì „ìˆ  ì„¤ì • (Tactics)**

**ì»´í¬ë„ŒíŠ¸**: `TacticsEditor.js` (ì¶”ì • - ì‹¤ì œ íŒŒì¼ ë¯¸í™•ì¸)

**ì‚¬ìš©ì ì…ë ¥** (ì¶”ì •):
```javascript
const tactics = {
  // ìˆ˜ë¹„ ì „ìˆ 
  defensive_line: 70,        // ìˆ˜ë¹„ ë¼ì¸ ë†’ì´ (0-100)
  defensive_width: 60,       // ìˆ˜ë¹„ í­ (0-100)
  defensive_aggression: 50,  // ìˆ˜ë¹„ ì••ë°• ê°•ë„ (0-100)

  // ê³µê²© ì „ìˆ 
  attacking_width: 70,       // ê³µê²© í­ (0-100)
  attacking_tempo: 65,       // ê³µê²© í…œí¬ (0-100)
  attacking_risk: 60,        // ê³µê²© ìœ„í—˜ ê°ìˆ˜ë„ (0-100)

  // ì „í™˜ ì „ìˆ 
  counter_attack_speed: 80,  // ì—­ìŠµ ì†ë„ (0-100)
  build_up_style: 'short',   // ë¹Œë“œì—… ìŠ¤íƒ€ì¼ ('short', 'long', 'mixed')
  pressing_intensity: 75     // í”„ë ˆì‹± ê°•ë„ (0-100)
}
```

**ì €ì¥ ê²½ë¡œ**: `backend/data/tactics/{team_name}.json`

**íŠ¹ì§•** (ì¶”ì •):
- âœ… **9-12ê°œ ì „ìˆ  íŒŒë¼ë¯¸í„°**
- âœ… **ìŠ¬ë¼ì´ë”ë¡œ 0-100 ë²”ìœ„ ì¡°ì •**
- âœ… **í”„ë¦¬ì…‹ ì œê³µ ê°€ëŠ¥** (ì˜ˆ: 'Attacking', 'Defensive', 'Balanced')

---

## ğŸ”„ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ ì¡°ê±´

### âœ… **í•„ìˆ˜ ì™„ë£Œ í•­ëª©**

`backend/api/app.py` - `/api/teams/<team_name>/simulation-ready` ì—”ë“œí¬ì¸íŠ¸ì—ì„œ í™•ì¸:

```python
def check_simulation_ready(team_name):
    # 1. Rating í™•ì¸
    has_rating = os.path.exists(f"data/overall_scores/{team_name}.json")

    # 2. Formation í™•ì¸
    has_formation = os.path.exists(f"data/formations/{team_name}.json")

    # 3. Lineup í™•ì¸
    has_lineup = os.path.exists(f"data/lineups/{team_name}.json")

    # 4. Tactics í™•ì¸
    has_tactics = os.path.exists(f"data/tactics/{team_name}.json")

    ready = has_rating and has_formation and has_lineup and has_tactics

    return {
        'ready': ready,
        'completed': {
            'rating': has_rating,
            'formation': has_formation,
            'lineup': has_lineup,
            'tactics': has_tactics
        },
        'missing': ['rating', 'formation', 'lineup', 'tactics']  # ëˆ„ë½ëœ í•­ëª©
    }
```

**4ê°€ì§€ ì¡°ê±´ì´ ëª¨ë‘ ì¶©ì¡±ë˜ì–´ì•¼ë§Œ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ ê°€ëŠ¥!**

---

## ğŸ“Š ë°±ì—”ë“œ E2E í…ŒìŠ¤íŠ¸ì™€ì˜ ë¹„êµ

### ğŸ”´ **ì°¨ì´ì  ë°œê²¬**

#### **ë°±ì—”ë“œ E2E í…ŒìŠ¤íŠ¸ Input** (test_e2e_comprehensive.py)
```python
# ê°„ì†Œí™”ëœ TeamInput
team_input = TeamInput(
    name="Arsenal",
    formation="4-3-3",
    recent_form="WWDWL",         # âœ… í”„ë¡ íŠ¸ì—”ë“œì— ì—†ìŒ
    injuries=["Partey"],         # âœ… í”„ë¡ íŠ¸ì—”ë“œì— ì—†ìŒ
    key_players=["Saka", "Odegaard", "Martinelli"],  # âœ… í”„ë¡ íŠ¸ì—”ë“œì— ì—†ìŒ
    attack_strength=85.0,        # âŒ ê³„ì‚°ëœ ê°’ (í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì§ì ‘ ì…ë ¥ ì•ˆ í•¨)
    defense_strength=82.0,       # âŒ ê³„ì‚°ëœ ê°’
    press_intensity=88.0,        # âŒ ê³„ì‚°ëœ ê°’
    buildup_style="possession"   # âŒ ê³„ì‚°ëœ ê°’
)
```

#### **í”„ë¡ íŠ¸ì—”ë“œ ì‹¤ì œ Input**
```javascript
// 1. ì„ ìˆ˜ 18ê°œ ì†ì„± í‰ê°€ (ê° ì„ ìˆ˜ë§ˆë‹¤)
playerRatings[playerId] = {
  finishing: 4.5,
  shotPower: 4.0,
  // ... 18ê°œ ì†ì„±
}

// 2. í¬ë©”ì´ì…˜
formation = '4-3-3'

// 3. ë¼ì¸ì—… (11ëª… ë°°ì¹˜)
lineup = {
  starters: { 'GK': id, 'LB': id, ... },
  substitutes: [id1, id2, ...]
}

// 4. ì „ìˆ  íŒŒë¼ë¯¸í„°
tactics = {
  defensive_line: 70,
  attacking_tempo: 65,
  // ... 9-12ê°œ íŒŒë¼ë¯¸í„°
}
```

---

## âš ï¸ **ì£¼ìš” ì°¨ì´ì  ë° ëˆ„ë½ëœ ì—°ê²°**

### 1. **Recent Form (ìµœê·¼ í¼)** - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì…ë ¥ ì•ˆ ë°›ìŒ
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸: `recent_form="WWDWL"` ëª…ì‹œì ìœ¼ë¡œ ì œê³µ
- í”„ë¡ íŠ¸ì—”ë“œ: **ì…ë ¥ ë°©ë²• ì—†ìŒ**
- **í•´ê²° í•„ìš”**: APIì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„° ê°€ì ¸ì˜¤ê±°ë‚˜ ì‚¬ìš©ì ì…ë ¥ ì¶”ê°€

### 2. **Injuries (ë¶€ìƒì ëª©ë¡)** - ë¶€ë¶„ì ìœ¼ë¡œë§Œ ë°˜ì˜
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸: `injuries=["Partey"]` ëª…ì‹œì ìœ¼ë¡œ ì œê³µ
- í”„ë¡ íŠ¸ì—”ë“œ: ë¶€ìƒì ë°ì´í„° ìˆì§€ë§Œ **ì‹œë®¬ë ˆì´ì…˜ inputìœ¼ë¡œ ì „ë‹¬ ì•ˆ ë¨**
- **í•´ê²° í•„ìš”**: ë¼ì¸ì—…ì—ì„œ ë¶€ìƒì ì œì™¸ + MatchInputì— injuries ì¶”ê°€

### 3. **Key Players (í•µì‹¬ ì„ ìˆ˜)** - ì…ë ¥ ì—†ìŒ
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸: `key_players=["Saka", "Odegaard", "Martinelli"]`
- í”„ë¡ íŠ¸ì—”ë“œ: **ì…ë ¥ ë°©ë²• ì—†ìŒ**
- **í•´ê²° ë°©ì•ˆ**: ì„ ìˆ˜ í‰ê°€ ì ìˆ˜ ìƒìœ„ 3ëª… ìë™ ì„ ì •

### 4. **Attack/Defense/Press Strength** - ê³„ì‚° ë¡œì§ í™•ì¸ í•„ìš”
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸: ì§ì ‘ ëª…ì‹œ (attack_strength=85.0)
- í”„ë¡ íŠ¸ì—”ë“œ: **18ê°œ ì„ ìˆ˜ ì†ì„±ì—ì„œ ìë™ ê³„ì‚°ë˜ì–´ì•¼ í•¨**
- **í™•ì¸ í•„ìš”**: TeamInputMapperê°€ ì˜¬ë°”ë¥´ê²Œ ê³„ì‚°í•˜ëŠ”ì§€

### 5. **Buildup Style** - ì „ìˆ ì—ì„œ ì¶”ì¶œ í•„ìš”
- ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸: `buildup_style="possession"`
- í”„ë¡ íŠ¸ì—”ë“œ: **tacticsì—ì„œ build_up_style ì‚¬ìš©**
- **í™•ì¸ í•„ìš”**: TacticsEditorê°€ ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ëŠ”ì§€

---

## ğŸ¯ ê²°ë¡ 

### âœ… **í”„ë¡ íŠ¸ì—”ë“œê°€ ì œê³µí•˜ëŠ” ê²ƒ**
1. âœ… ì„ ìˆ˜ë³„ 18ê°œ ì†ì„± í‰ê°€ (ë§¤ìš° ìƒì„¸í•¨)
2. âœ… í¬ë©”ì´ì…˜ ì„ íƒ
3. âœ… 11ëª… ë¼ì¸ì—… ë°°ì¹˜
4. âœ… ì „ìˆ  íŒŒë¼ë¯¸í„° (9-12ê°œ)

### âŒ **í”„ë¡ íŠ¸ì—”ë“œê°€ ì œê³µí•˜ì§€ ì•ŠëŠ” ê²ƒ**
1. âŒ Recent Form (ìµœê·¼ 5ê²½ê¸° ê²°ê³¼)
2. âŒ Injuries (ë¶€ìƒì ëª©ë¡ì„ inputìœ¼ë¡œ ì „ë‹¬)
3. âŒ Key Players (í•µì‹¬ ì„ ìˆ˜ ëª…ë‹¨)

### ğŸ”§ **ê³„ì‚°ìœ¼ë¡œ ì–»ì–´ì•¼ í•˜ëŠ” ê²ƒ**
1. ğŸ”§ Attack Strength (18ê°œ ê³µê²© ì†ì„± í‰ê· )
2. ğŸ”§ Defense Strength (ìˆ˜ë¹„ ì†ì„± í‰ê· )
3. ğŸ”§ Press Intensity (ì „ìˆ  íŒŒë¼ë¯¸í„°ì—ì„œ)
4. ğŸ”§ Buildup Style (ì „ìˆ  íŒŒë¼ë¯¸í„°ì—ì„œ)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. **ë°±ì—”ë“œ ë§¤í•‘ ê²€ì¦**
```bash
# TeamInputMapperê°€ í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í™•ì¸
python3 -m pytest backend/tests/unit/test_team_input_mapper.py -v
```

### 2. **ëˆ„ë½ëœ Input ì¶”ê°€**
- [ ] Recent Form ì…ë ¥ UI ì¶”ê°€
- [ ] Injuriesë¥¼ MatchInputì— í¬í•¨
- [ ] Key Players ìë™ ì„ ì • ë¡œì§ ì¶”ê°€

### 3. **E2E í…ŒìŠ¤íŠ¸ Input í˜„ì‹¤í™”**
- [ ] í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‹¤ì œë¡œ ì œê³µí•˜ëŠ” ë°ì´í„°ë¡œ E2E í…ŒìŠ¤íŠ¸ ì¬ì‘ì„±
- [ ] 18ê°œ ì„ ìˆ˜ ì†ì„± â†’ 4ê°œ íŒ€ ì „ë ¥ ìë™ ê³„ì‚° ê²€ì¦
- [ ] Tactics â†’ Buildup Style ë§¤í•‘ ê²€ì¦

---

## ğŸ“ ìš”ì•½

**í”„ë¡ íŠ¸ì—”ë“œëŠ” ë§¤ìš° ìƒì„¸í•œ ë°ì´í„°ë¥¼ ë°›ì§€ë§Œ (ì„ ìˆ˜ë³„ 18ê°œ ì†ì„±),
ë°±ì—”ë“œ E2E í…ŒìŠ¤íŠ¸ëŠ” ê°„ì†Œí™”ëœ ë°ì´í„°ë¥¼ ì‚¬ìš© (4ê°œ íŒ€ ì†ì„±).**

**ì¤‘ìš”í•œ ì—°ê²°ê³ ë¦¬**:
- `18ê°œ ì„ ìˆ˜ ì†ì„±` â†’ (ê³„ì‚°) â†’ `4ê°œ íŒ€ ì „ë ¥` â†’ (AI í”„ë¡¬í”„íŠ¸) â†’ `Scenario ìƒì„±`

**ì´ ë³€í™˜ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ ê²€ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤!**
