/Users/stlee/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
Traceback (most recent call last):
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/ai_integration.py", line 145, in analyze_result
    result = self._dict_to_analysis_result(analysis_dict)
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/ai_integration.py", line 313, in _dict_to_analysis_result
    adjusted_scenario = self._dict_to_scenario(data['adjusted_scenario'])
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/ai_integration.py", line 271, in _dict_to_scenario
    events = [
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/ai_integration.py", line 272, in <listcomp>
    ScenarioEvent(
  File "<string>", line 9, in __init__
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/ai/data_models.py", line 125, in __post_init__
    assert 0 <= self.minute_range[1] <= 90
AssertionError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/test_comprehensive_scenarios.py", line 99, in run_scenario
    result = self.simulator.simulate_match(match_input)
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/match_simulator_v3.py", line 106, in simulate_match
    analysis = self.ai.analyze_result(scenario, result, iteration, self.max_iterations)
  File "/Users/stlee/Desktop/EPL-Match-Predictor/backend/simulation/v3/ai_integration.py", line 147, in analyze_result
    raise AIClientError(f"Phase 3 AnalysisResult ìƒì„± ì‹¤íŒ¨: {e}")
simulation.v3.ai_integration.AIClientError: Phase 3 AnalysisResult ìƒì„± ì‹¤íŒ¨: 

======================================================================
ðŸš€ Comprehensive Domain Input Scenario Testing
======================================================================
âœ… Qwen 2.5 14B ready


======================================================================
ðŸŽ¯ Scenario: Scenario 1: Strong vs Weak Team
======================================================================

ðŸ  Home: Manchester City
   Formation: 4-3-3 | Style: possession
   Attack: 95 | Defense: 90 | Press: 85

âœˆï¸  Away: Sheffield United
   Formation: 5-4-1 | Style: direct
   Attack: 65 | Defense: 68 | Press: 70

â±ï¸  Running simulation...

============================================================
Match Simulator V3: Manchester City vs Sheffield United
============================================================

Phase 1: AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ: 5ê°œ ì´ë²¤íŠ¸

--- Iteration 1/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 4-1
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 40%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.37
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

--- Iteration 2/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 4-0
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 40%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: converged
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.73
  ìˆ˜ë ´ ì—¬ë¶€: âœ… Yes

âœ… ìˆ˜ë ´ ì™„ë£Œ! (Iteration 2)

Phase 7: ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±...
  âœ… ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ (1565 ë¬¸ìž)

============================================================
âœ… ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!
============================================================


ðŸ“Š Results:
   Score: 4-0
   Iterations: 2
   Convergence: 0.73

ðŸ“ˆ Stats:
   Home Shots: 20 | Away Shots: 9
   Home Possession: 49% | Away Possession: 41%

ðŸ” Validation:
   âœ… Home team dominance reflected in score
   âš ï¸  Possession style not well reflected
   âœ… Higher attack strength reflected in shots (20 vs 9)
   âœ… Reasonable convergence score: 0.73

âœ… Scenario PASSED


======================================================================
ðŸŽ¯ Scenario: Scenario 2: Evenly Matched Teams
======================================================================

ðŸ  Home: Arsenal
   Formation: 4-3-3 | Style: possession
   Attack: 88 | Defense: 85 | Press: 82

âœˆï¸  Away: Liverpool
   Formation: 4-3-3 | Style: possession
   Attack: 87 | Defense: 84 | Press: 88

â±ï¸  Running simulation...

============================================================
Match Simulator V3: Arsenal vs Liverpool
============================================================

Phase 1: AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ: 7ê°œ ì´ë²¤íŠ¸

--- Iteration 1/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 1-0
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 14%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.20
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

--- Iteration 2/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 3-0
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 14%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.21
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

âš ï¸  ìµœëŒ€ ë°˜ë³µ 2íšŒ ë„ë‹¬

Phase 7: ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±...
  âœ… ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ (1463 ë¬¸ìž)

============================================================
âœ… ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!
============================================================


ðŸ“Š Results:
   Score: 3-0
   Iterations: 2
   Convergence: 0.21

ðŸ“ˆ Stats:
   Home Shots: 11 | Away Shots: 13
   Home Possession: 38% | Away Possession: 52%

ðŸ” Validation:
   âœ… Balanced match (score: 3-0)
   âš ï¸  Low convergence: 0.21

âœ… Scenario PASSED


======================================================================
ðŸŽ¯ Scenario: Scenario 3: Attack-focused vs Defense-focused
======================================================================

ðŸ  Home: Newcastle United
   Formation: 4-2-3-1 | Style: direct
   Attack: 90 | Defense: 72 | Press: 78

âœˆï¸  Away: Atletico Madrid
   Formation: 4-4-2 | Style: direct
   Attack: 75 | Defense: 92 | Press: 85

â±ï¸  Running simulation...

============================================================
Match Simulator V3: Newcastle United vs Atletico Madrid
============================================================

Phase 1: AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ: 6ê°œ ì´ë²¤íŠ¸

--- Iteration 1/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 0-3
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 0%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.11
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

--- Iteration 2/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 0-3
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 0%
Phase 3: AI ë¶„ì„/ì¡°ì •...

âŒ Scenario FAILED: Phase 3 AnalysisResult ìƒì„± ì‹¤íŒ¨: 


======================================================================
ðŸŽ¯ Scenario: Scenario 4: Possession vs Direct Playstyle
======================================================================

ðŸ  Home: Brighton
   Formation: 4-3-3 | Style: possession
   Attack: 80 | Defense: 78 | Press: 75

âœˆï¸  Away: Burnley
   Formation: 4-4-2 | Style: direct
   Attack: 72 | Defense: 80 | Press: 78

â±ï¸  Running simulation...

============================================================
Match Simulator V3: Brighton vs Burnley
============================================================

Phase 1: AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ: 6ê°œ ì´ë²¤íŠ¸

--- Iteration 1/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 1-2
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 0%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.11
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

--- Iteration 2/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 4-0
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 17%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: converged
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.57
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
  â„¹ï¸  ì¡°ì •ëœ ì‹œë‚˜ë¦¬ì˜¤ ì—†ìŒ, í˜„ìž¬ ì‹œë‚˜ë¦¬ì˜¤ ìœ ì§€

âš ï¸  ìµœëŒ€ ë°˜ë³µ 2íšŒ ë„ë‹¬

Phase 7: ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±...
  âœ… ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ (1646 ë¬¸ìž)

============================================================
âœ… ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!
============================================================


ðŸ“Š Results:
   Score: 4-0
   Iterations: 2
   Convergence: 0.57

ðŸ“ˆ Stats:
   Home Shots: 19 | Away Shots: 10
   Home Possession: 61% | Away Possession: 29%

ðŸ” Validation:
   âœ… Possession style reflected in stats (Home: 61%)
   âœ… Reasonable convergence score: 0.57

âœ… Scenario PASSED


======================================================================
ðŸŽ¯ Scenario: Scenario 5: Formation Variety (3-5-2 vs 4-2-3-1)
======================================================================

ðŸ  Home: Tottenham
   Formation: 3-5-2 | Style: mixed
   Attack: 85 | Defense: 80 | Press: 82

âœˆï¸  Away: Chelsea
   Formation: 4-2-3-1 | Style: possession
   Attack: 83 | Defense: 82 | Press: 80

â±ï¸  Running simulation...

============================================================
Match Simulator V3: Tottenham vs Chelsea
============================================================

Phase 1: AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ: 6ê°œ ì´ë²¤íŠ¸

--- Iteration 1/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 2-5
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 0%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: needs_adjustment
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.11
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
Phase 5: ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì •...
  âœ… ì‹œë‚˜ë¦¬ì˜¤ ì¡°ì • ì™„ë£Œ

--- Iteration 2/2 ---
Phase 2: Statistical Engine ì‹œë®¬ë ˆì´ì…˜...
  ìµœì¢… ìŠ¤ì½”ì–´: 3-5
  ì„œì‚¬ ì¼ì¹˜ìœ¨: 0%
Phase 3: AI ë¶„ì„/ì¡°ì •...
  AI ìƒíƒœ: converged
Phase 4: ìˆ˜ë ´ íŒë‹¨...
  ìˆ˜ë ´ ì ìˆ˜: 0.46
  ìˆ˜ë ´ ì—¬ë¶€: âŒ No
  â„¹ï¸  ì¡°ì •ëœ ì‹œë‚˜ë¦¬ì˜¤ ì—†ìŒ, í˜„ìž¬ ì‹œë‚˜ë¦¬ì˜¤ ìœ ì§€

âš ï¸  ìµœëŒ€ ë°˜ë³µ 2íšŒ ë„ë‹¬

Phase 7: ìµœì¢… ë¦¬í¬íŠ¸ ìƒì„±...
  âœ… ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ (1843 ë¬¸ìž)

============================================================
âœ… ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!
============================================================


ðŸ“Š Results:
   Score: 3-5
   Iterations: 2
   Convergence: 0.46

ðŸ“ˆ Stats:
   Home Shots: 13 | Away Shots: 34
   Home Possession: 17% | Away Possession: 73%

ðŸ” Validation:
   âœ… Reasonable convergence score: 0.46

âœ… Scenario PASSED


======================================================================
ðŸ“‹ Test Summary
======================================================================

Total Scenarios: 5
Passed: 4
Failed: 1

----------------------------------------------------------------------
âœ… 1. Scenario 1: Strong vs Weak Team
   Score: 4-0 | Convergence: 0.73
âœ… 2. Scenario 2: Evenly Matched Teams
   Score: 3-0 | Convergence: 0.21
âŒ 3. Scenario 3: Attack-focused vs Defense-focused
   Error: Phase 3 AnalysisResult ìƒì„± ì‹¤íŒ¨: 
âœ… 4. Scenario 4: Possession vs Direct Playstyle
   Score: 4-0 | Convergence: 0.57
âœ… 5. Scenario 5: Formation Variety (3-5-2 vs 4-2-3-1)
   Score: 3-5 | Convergence: 0.46
----------------------------------------------------------------------

âš ï¸  1 scenario(s) failed
